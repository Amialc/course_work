{% extends 'base.html' %}

{% block content %}
<div id="edit">
    <div class="text-center">
        {{ test.name }} <a class="btn btn-default" href="{{ url_for('edit_name',id=test.id) }}">Edit name</a><br>
    </div>
    {% if questions %}
    <div id="questions">
    <table class="table table-bordered">
    {% for question in questions %}
    <tr>
    {% if answers[question.id] | length == 0 %}
    <td class="col-md-8">{{ question.text }}</td>
    <td class="col-md-4"><div class="text-center"><form method="post" action="">
    {{ new_answer_form.hidden_tag() }}
    {{ new_answer_form.question(value=question.id, style="display: none;") }}
    {{ new_answer_form.string(placeholder="new answer") }}
    {{ new_answer_form.submit(class="btn btn-default") }}
    </form></div></td>
    {% else %}
    <td class="col-md-8" rowspan="{{ answers[question.id] | length + 1 }}">{{ question.text }}</td>
    {% for answer in answers[question.id] %}
    <td class="col-md-3"><ul>
                <li>{{ answer.text }}</li>
        </ul></td>
    <td class="col-md-1"><a href="{{ url_for('delete_answer',id=answer.id) }}" class="btn btn-danger">delete</a></td>
    </tr>
    {% endfor %}
    <tr><td colspan="2" class="col-md-4">
    <div class="text-center">
    <form method="post" action="">
    {{ new_answer_form.hidden_tag() }}
    {{ new_answer_form.question(value=question.id, style="display: none;") }}
    {{ new_answer_form.string(placeholder="new answer") }}
    {{ new_answer_form.submit(class="btn btn-default") }}
    </form></div></td></tr>
    {% endif %}
    {% endfor %}
    </table>
    {% endif %}
    </div>
    </div>
</div>
<div class="text-center">
<form method="post" action="">
    {{ new_question_form.hidden_tag() }}
    {{ new_question_form.string(placeholder="new question") }}
    {{ new_question_form.submit(class="btn btn-default") }}
    </form>
</div>
{% endblock %}

{% block script %}
<script type="text/javascript" src="{{ url_for('static',filename='js/jeditable.js') }}"></script>
{% endblock %}